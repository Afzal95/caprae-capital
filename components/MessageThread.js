import { useDispatch } from 'react-redux'; import { sendMessage } from '@/redux/dealsSlice'; import { useState } from 'react'
export default function MessageThread({ deal }){ const dispatch = useDispatch(); const [text,setText] = useState(''); return (<div className="card"><div className="font-semibold mb-2">Messages</div><div className="h-48 overflow-auto border rounded-xl2 p-2 bg-gray-50">{deal.messages.map(m=>(<div key={m.id} className="mb-2"><div className="text-xs text-gray-500">{m.from} • {new Date(m.at).toLocaleString()}</div><div>{m.text}</div></div>))}</div><div className="mt-2 flex gap-2"><input className="flex-1 border rounded-xl2 p-2" value={text} onChange={e=>setText(e.target.value)} placeholder="Type a message..." /><button className="btn bg-teal text-white" onClick={()=>{ if(text){ dispatch(sendMessage({dealId: deal.id, from:'you', text})); setText('') } }}>Send</button></div><div className="mt-2 text-sm">Quick templates:<div className="flex gap-2 mt-1">{['Please share updated LOI','Let’s schedule diligence call','Sharing NDA shortly'].map(t=>(<button key={t} className="tag hover:bg-mint/50" onClick={()=>dispatch(sendMessage({dealId: deal.id, from:'you', text:t}))}>{t}</button>))}</div></div></div>) }