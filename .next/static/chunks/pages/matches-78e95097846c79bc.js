(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{8718:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/matches",function(){return t(9080)}])},1398:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(5893),i=t(7294),l=t(1664),n=t.n(l),r=t(5007),d=t(1163);function c(e){let{children:s}=e,t=(0,r.v9)(e=>e.user.profileCompletion),l=(0,r.v9)(e=>e.user),c=!!l&&!!l.email||(null==l?void 0:l.isAuthenticated),o=(0,d.useRouter)();return i.useEffect(()=>{!c&&["/dashboard","/deals","/profile","/matches","/messages","/settings"].includes(o.pathname)&&o.replace("/")},[c,o.pathname]),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)("header",{className:"bg-white shadow mb-6",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-3 flex items-center",children:(0,a.jsx)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>o.push(c?"/role":"/"),children:(0,a.jsx)("span",{className:"font-bold text-xl text-teal-700",children:"Caprae"})})})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("aside",{className:"w-64 bg-white border-r p-4",children:[(0,a.jsx)("div",{className:"font-bold text-teal text-lg mb-4",children:"Caprae Platform"}),(0,a.jsxs)("nav",{className:"space-y-2",children:[(0,a.jsx)(n(),{className:"block px-3 py-2 rounded hover:bg-mint/20",href:"/dashboard",children:"Dashboard"}),(0,a.jsx)(n(),{className:"block px-3 py-2 rounded hover:bg-mint/20",href:"/matches",children:"Matches"}),(0,a.jsx)(n(),{className:"block px-3 py-2 rounded hover:bg-mint/20",href:"/deals",children:"Deals"}),(0,a.jsx)(n(),{className:"block px-3 py-2 rounded hover:bg-mint/20",href:"/messages",children:"Messages"}),(0,a.jsx)(n(),{className:"block px-3 py-2 rounded hover:bg-mint/20",href:"/profile",children:"Profile"}),(0,a.jsx)(n(),{className:"block px-3 py-2 rounded hover:bg-mint/20",href:"/settings",children:"Settings"})]}),!c&&(0,a.jsxs)("div",{className:"mt-6 text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"mb-2",children:"You are viewing as a guest. Some features may be limited."}),(0,a.jsx)(n(),{href:"/login",className:"text-teal-600 underline",children:"Login to access full features"})]}),c&&(0,a.jsxs)("div",{className:"mt-6 text-sm",children:[(0,a.jsx)("div",{className:"mb-1 font-medium",children:"Profile Completion"}),(0,a.jsx)("div",{className:"w-full bg-gray-100 rounded h-2",children:(0,a.jsx)("div",{className:"bg-teal h-2 rounded",style:{width:"".concat(t,"%")}})})]})]}),(0,a.jsx)("main",{className:"flex-1 p-6",children:s})]})]})}},9080:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(5893),i=t(1398),l=t(5007);t(6333);var n=t(5269),r=t(7294);function d(e){let{title:s,onClose:t,children:i}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl2 shadow-soft p-6 w-full max-w-xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:s}),(0,a.jsx)("button",{onClick:t,className:"text-gray-500",children:"✕"})]}),(0,a.jsx)("div",{className:"text-sm",children:i}),(0,a.jsx)("div",{className:"mt-4 text-right",children:(0,a.jsx)("button",{className:"btn bg-teal text-white",onClick:t,children:"Close"})})]})})}function c(e){let{biz:s,onClose:t,onStartDeal:i,onSendMessage:l}=e,[n,d]=(0,r.useState)("Hi, I'm interested. Can we schedule a call?");return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl2 shadow-soft p-6 w-full max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:s.name}),(0,a.jsx)("button",{onClick:t,className:"text-gray-500",children:"✕"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Industry:"})," ",(0,a.jsx)("span",{className:"capitalize",children:s.industry})]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Location:"})," ",s.location]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Revenue:"})," ",s.revenue]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Asking Price:"})," ",s.price]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium mb-1",children:"AI Summary (stub):"}),(0,a.jsx)("p",{className:"bg-gray-50 p-3 rounded-xl2",children:"Stable YoY revenue, strong gross margins, low churn SaaS-like retention. Risks: key-person dependency, regional concentration."}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Detailed docs locked until NDA."})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"font-medium mb-1",children:"Message Seller"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{className:"flex-1 border rounded-xl2 p-2",value:n,onChange:e=>d(e.target.value)}),(0,a.jsx)("button",{className:"btn bg-white border",onClick:()=>l(n),children:"Send"})]})]}),(0,a.jsxs)("div",{className:"mt-4 text-right",children:[(0,a.jsx)("button",{className:"btn bg-white border mr-2",onClick:t,children:"Close"}),(0,a.jsx)("button",{className:"btn bg-teal text-white",onClick:i,children:"Start Deal (Create NDA stage)"})]})]})}):null}var o=t(1163);function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e||"").split(",").map(e=>e.trim().toLowerCase()).filter(Boolean)}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=(e||"").replace(/[,$\s]/g,"").match(/(\d+(?:\.\d+)?)/);return s?parseFloat(s[1]):null}let u=[{id:"b1",name:"Acme Corp",industry:"Technology",location:"San Francisco, CA",description:"Leading SaaS provider for enterprise clients."},{id:"b2",name:"GreenLeaf Organics",industry:"Agriculture",location:"Fresno, CA",description:"Organic produce farm with established distribution."},{id:"b3",name:"Urban Eats",industry:"Food & Beverage",location:"New York, NY",description:"Popular fast-casual restaurant chain."},{id:"b4",name:"HealthFirst Clinics",industry:"Healthcare",location:"Austin, TX",description:"Multi-location urgent care clinics."}];function h(){let e=(0,l.v9)(e=>e.user.role),s=(0,l.v9)(e=>e.user.info),t=(0,l.v9)(e=>e.user.businessInfo),h=(0,l.v9)(e=>e.matches.buyerCards),b=(0,l.v9)(e=>e.matches.businessCards),g=(0,l.v9)(e=>e.deals.deals||[]),v=(0,l.I0)(),j=(0,o.useRouter)(),[p,N]=(0,r.useState)(null),[y,f]=(0,r.useState)(null),w=(0,r.useMemo)(()=>{var t,a;if("buyer"!==e)return b;let i=m(s.industries),l=m(s.locations),n=x((null===(a=s.dealSize)||void 0===a?void 0:null===(t=a.split("-"))||void 0===t?void 0:t[1])||s.funds)||1/0;return b.map(e=>{let s=i.length&&i.includes((e.industry||"").toLowerCase())?1:0,t=l.length&&l.includes((e.location||"").toLowerCase())?1:0,a=x(e.price);return{...e,__score:s+t+(a&&a<=n?1:0)}}).sort((e,s)=>s.__score-e.__score)},[e,s,b]),C="buyer"!==e&&"seller"!==e;return(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"text-xl font-semibold",children:"Matches"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Role: ",e||"—"]})]}),"buyer"===e&&(0,a.jsx)("div",{className:"mb-3 text-sm text-gray-700",children:"Recommendations based on your profile (industries, locations, budget)."}),C&&(0,a.jsx)("div",{className:"mb-3 text-sm text-gray-700",children:"Showing default business listings. Select a role for personalized matches."}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:["seller"===e&&h.map(e=>{let s=g.find(s=>s.name===e.name&&"closed"===s.status);return(0,a.jsxs)("div",{className:"card p-6 relative",children:[(0,a.jsx)("div",{className:"font-semibold text-lg mb-1",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Type: ",e.type]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Funds: ",e.funds]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Industries: ",Array.isArray(e.industries)?e.industries.join(", "):e.industries]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Locations: ",Array.isArray(e.locations)?e.locations.join(", "):e.locations]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Deal Size: ",e.dealSize]}),(0,a.jsx)("div",{className:"text-sm text-gray-700 mb-2",children:e.description}),(0,a.jsx)("button",{className:"btn bg-teal text-white mt-2",onClick:()=>N({title:e.name,body:"Type: ".concat(e.type,"\nFunds: ").concat(e.funds,"\nIndustries: ").concat(Array.isArray(e.industries)?e.industries.join(", "):e.industries,"\nLocations: ").concat(Array.isArray(e.locations)?e.locations.join(", "):e.locations,"\nDeal Size: ").concat(e.dealSize,"\n").concat(e.description)}),children:"View Details"}),s&&(0,a.jsx)("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"Deal Closed"})]},e.id)}),"buyer"===e&&w.map(e=>{let s=g.find(s=>s.name===e.name&&"closed"===s.status);return(0,a.jsxs)("div",{className:"card p-6 relative",children:[(0,a.jsx)("div",{className:"font-semibold text-lg mb-1",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Industry: ",e.industry]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Location: ",e.location]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Founded: ",e.founded]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Employees: ",e.employees]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Revenue: ",e.revenue]}),(0,a.jsx)("div",{className:"text-sm text-gray-700 mb-2",children:e.description}),(0,a.jsx)("button",{className:"btn bg-teal text-white mt-2",onClick:()=>f(e),children:"View Details"}),s&&(0,a.jsx)("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"Deal Closed"})]},e.id)}),C&&(t&&t.name?(()=>{let e=g.find(e=>e.name===t.name&&"closed"===e.status);return(0,a.jsxs)("div",{className:"card p-6 relative",children:[(0,a.jsx)("div",{className:"font-semibold text-lg mb-1",children:t.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Industry: ",t.industry]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Location: ",t.location]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Founded: ",t.founded]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Employees: ",t.employees]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Revenue: ",t.revenue]}),(0,a.jsx)("div",{className:"text-sm text-gray-700 mb-2",children:t.description}),(0,a.jsx)("button",{className:"btn bg-teal text-white mt-2",onClick:()=>f(t),children:"View Details"}),e&&(0,a.jsx)("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"Deal Closed"})]})})():u.map(e=>{let s=g.find(s=>s.name===e.name&&"closed"===s.status);return(0,a.jsxs)("div",{className:"card p-6 relative",children:[(0,a.jsx)("div",{className:"font-semibold text-lg mb-1",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Industry: ",e.industry]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Location: ",e.location]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Founded: ",e.founded||"—"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Employees: ",e.employees||"—"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Revenue: ",e.revenue||"—"]}),(0,a.jsx)("div",{className:"text-sm text-gray-700 mb-2",children:e.description}),(0,a.jsx)("button",{className:"btn bg-teal text-white mt-2",onClick:()=>f(e),children:"View Details"}),s&&(0,a.jsx)("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"Deal Closed"})]},e.id)}))]}),p&&(0,a.jsx)(d,{title:p.title,onClose:()=>N(null),children:p.body}),y&&(0,a.jsx)(c,{biz:y,onClose:()=>f(null),onStartDeal:()=>{v((0,n.ZT)(y.name)),f(null),j.push("/deals")},onSendMessage:e=>{let s=v((0,n.ZT)(y.name));v({type:"deals/sendMessage",payload:{dealId:s.payload.id,from:"buyer",text:e}}),f(null),j.push("/deals")}})]})}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=8718)}),_N_E=e.O()}]);